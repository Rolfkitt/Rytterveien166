const translations = {
    no: {
        title: "Velkommen til Rytterveien 166",
        subtitle: "Guide og hjelpeside",
        tocTitle: "Innholdsfortegnelse",
        waterToc: "ğŸ’§ Vannforsyning",
        bedroomsToc: "ğŸ›ï¸ Soverom",
        jacuzziToc: "ğŸ› Boblebad",
        fireplaceToc: "ğŸ”¥ Peis",
        saunaToc: "ğŸ§– Badstue",
        wasteToc: "â™»ï¸ SÃ¸ppelsortering",
        skiToc: "ğŸ¿ Skibakken",
        cafeToc: "â˜• Kafe",
        departureToc: "ğŸ“‹ Ved Avreise",
        waterTitle: "ğŸ’§ Vannforsyning",
        waterText: "Vannkranen mÃ¥ Ã¥pnes nÃ¥r dere ankommer og lukkes nÃ¥r dere forlater hytta. Dette sikrer at rÃ¸rene ikke fryser om vinteren.",
        bedroomsTitle: "ğŸ›ï¸ Soverom",
        bedroomsText: "Soverommene er ryddet opp og klargjort for dere. Alle senger er gjort med rent sengetÃ¸y.",
        jacuzziTitle: "ğŸ› Boblebad",
        jacuzziIntro: "Vi tar godt vare pÃ¥ boblebadet for Ã¥ sikre en hyggelig opplevelse for dere. Her er siste vedlikehold:",
        jacuzziList: [
            "Vannskifte: Sist utfÃ¸rt 15. desember 2024",
            "Kvalitetssjekk (klorinnhold): Sist utfÃ¸rt 20. desember 2024"
        ],
        jacuzziTempAdvice: "Vi anbefaler at dere setter temperaturen til 38 grader ved ankomst. Dette gjÃ¸r dere ved Ã¥ trykke pÃ¥ displayet pÃ¥ boblebadet til Ã¸nsket temperatur vises.",
        jacuzziLidAdvice: "Viktig: Husk Ã¥ sette lokket pÃ¥ boblebadet nÃ¥r det ikke er i bruk for Ã¥ spare energi! ğŸ”‹ğŸ’š",
        jacuzziShowerAdvice: "FÃ¸r bruk Ã¸nsker vi at alle som skal bruke boblebadet tar en kjapp dusj. Dette er for Ã¥ sikre et hyggelig og rent miljÃ¸ for alle.",
        jacuzziChlorineAdvice: "Etter bruk skal det settes oppi 1 stk klor tablett for Ã¥ holde vannet rent.",
        fireplaceTitle: "ğŸ”¥ Peis",
        fireplaceIntro: "Peisen kan brukes til Ã¥ varme opp hytta. SÃ¸rg for at det ikke er brannfare, og slukk alltid peisen fÃ¸r dere forlater stedet.",
        fireplaceStart: "NÃ¥r vi bruker peisen anbefaler vi at dere legger inn 3 stk vedkubber og setter spjeld til maks.",
        fireplaceAdjust: "NÃ¥r det er god fyr i ovnen kan dere justere ned til under middels med dÃ¸ren helt lukket.",
        fireplaceDraught: "Det er veldig god trekk i denne ovnen.",
        fireplaceStanding: "Dere kan sette vedkubber stÃ¥ende for beste mulig fyr.",
        saunaTitle: "ğŸ§– Badstue",
        saunaText: "Badstuen er tilgjengelig for avslapning. FÃ¸lg sikkerhetsinstruksjonene og ikke bruk den uten tilsyn.",
        departureTitle: "ğŸ“‹ Ved Avreise",
        departureText: "Vi setter stor pris pÃ¥ om dere kan gjÃ¸re fÃ¸lgende fÃ¸r dere forlater hytta:",
        departureOutro: "HÃ¥per at dere har hatt et hyggelig opphold!",
        departureList: [
            "Ta alt brukte hÃ¥ndklÃ¦r og sengetÃ¸y og kast dem i vaskemaskinen.",
            "Skru av vannet.",
            "Heng opp nÃ¸kkelen tilbake i nÃ¸kkelboksen pÃ¥ utsiden av hoveddÃ¸ren.",
            "Sjekk at alle vinduer og dÃ¸rer er lukket."
        ],
        wasteTitle: "â™»ï¸ SÃ¸ppelsortering",
        wasteText: "Vi ber om at dere sorterer sÃ¸ppelet som fÃ¸lger: Bilder av sÃ¸ppelstasjonen vil bli lagt til her.",
        skiTitle: "ğŸ¿ Skibakken",
        skiIntro: "Nyt en dag med ski i Gautefall skibakken. Her er lÃ¸ypekartet og informasjon om heiskortpriser.",
        skiPrices: "For priser pÃ¥ heiskort, se nedenfor:",
        skiPricesList: "Voksen (dag): 500 NOK\nBarn (dag): 300 NOK\nSesongkort: 5000 NOK",
        cafeTitle: "â˜• Kafe",
        cafeIntro: "Kafeen ligger rett ved siden av hytten, kun 200 meter gangavstand og er en fin spasertur fra hytta. Her kan dere nyte en god kopp kaffe eller noe Ã¥ spise.",
        weatherToc: "ğŸŒ¤ï¸ VÃ¦rmelding",
        weatherTitle: "ğŸŒ¤ï¸ VÃ¦rmelding",
        weatherIntro: "Her er vÃ¦rvarslet for Gautefall skisenter de neste 7 dagene, hentet fra Yr.no. (Rev 2)"
    },
    da: {
        title: "Velkommen til Rytterveien 166",
        subtitle: "Guide og hjÃ¦lpeside",
        tocTitle: "Indholdsfortegnelse",
        waterToc: "ğŸ’§ Vandforsyning",
        bedroomsToc: "ğŸ›ï¸ SovevÃ¦relser",
        jacuzziToc: "ğŸ› Boblebad",
        fireplaceToc: "ğŸ”¥ Peis",
        saunaToc: "ğŸ§– Badstue",
        wasteToc: "â™»ï¸ Affaldssortering",
        skiToc: "ğŸ¿ Skibakken",
        cafeToc: "â˜• Kafe",
        weatherToc: "ğŸŒ¤ï¸ Vejrudsigt",
        departureToc: "ğŸ“‹ Ved Afrejse",
        waterTitle: "Vandforsyning",
        waterText: "Vandhanen skal Ã¥bnes nÃ¥r I ankommer og lukkes nÃ¥r I forlader hytten. Dette sikrer at rÃ¸rene ikke fryser om vinteren.",
        bedroomsTitle: "SovevÃ¦relser",
        bedroomsText: "SovevÃ¦relserne er ryddet op og gjort klar til jer. Alle senge er gjort med rent sengetÃ¸j.",
        jacuzziTitle: "ğŸ› Boblebad",
        jacuzziIntro: "Vi tager godt vare pÃ¥ boblebadet for at sikre en hyggelig oplevelse for jer. Her er sidste vedligeholdelse:",
        jacuzziList: [
            "Vandskifte: Sidst udfÃ¸rt 15. december 2024",
            "Kvalitetstjek (klorindhold): Sidst udfÃ¸rt 20. december 2024"
        ],
        jacuzziTempAdvice: "Vi anbefaler, at I sÃ¦tter temperaturen til 38 grader ved ankomst. Dette gÃ¸r I ved at trykke pÃ¥ displayet pÃ¥ boblebadet til Ã¸nsket temperatur vises.",
        jacuzziLidAdvice: "Vigtigt: Husk at sÃ¦tte lÃ¥get pÃ¥ boblebadet, nÃ¥r det ikke er i brug for at spare energi! ğŸ”‹ğŸ’š",
        jacuzziShowerAdvice: "FÃ¸r brug Ã¸nsker vi, at alle som skal bruge boblebadet tager et hurtigt bad. Dette er for at sikre et hyggeligt og rent miljÃ¸ for alle.",
        jacuzziChlorineAdvice: "Efter brug skal der sÃ¦ttes 1 stk klor tablet op i for at holde vandet rent.",
        fireplaceTitle: "ğŸ”¥ Peis",
        fireplaceIntro: "Peisen kan brukes til Ã¥ varme opp hytta. SÃ¸rg for at det ikke er brannfare, og slukk alltid peisen fÃ¸r dere forlater stedet.",
        fireplaceStart: "NÃ¥r vi bruker peisen anbefaler vi at dere legger inn 3 stk vedkubber og setter spjeld til maks.",
        fireplaceAdjust: "NÃ¥r det er god fyr i ovnen kan dere justere ned til under middels med dÃ¸ren helt lukket.",
        fireplaceDraught: "Det er veldig god trekk i denne ovnen.",
        fireplaceStanding: "Dere kan sette vedkubber stÃ¥ende for beste mulig fyr.",
        saunaTitle: "ğŸ§– Badstue",
        saunaText: "Badstuen er tilgjengelig for avslapning. FÃ¸lg sikkerhetsinstruksjonene og ikke bruk den uten tilsyn.",
        departureTitle: "ğŸ“‹ Ved Afrejse",
        departureText: "Venligst gÃ¸r fÃ¸lgende fÃ¸r I forlader hytten:",
        departureOutro: "HÃ¥ber at I har haft et hyggeligt ophold!",
        departureList: [
            "Tag alt brugt hÃ¥ndklÃ¦der og sengetÃ¸j og kast dem i vaskemaskinen.",
            "Sluk for vandet.",
            "HÃ¦ng nÃ¸glen tilbage i nÃ¸gleboksen pÃ¥ ydersiden af hoveddÃ¸ren.",
            "Tjek at alle vinduer og dÃ¸re er lukket."
        ],
        wasteTitle: "â™»ï¸ Affaldssortering",
        wasteText: "Vi beder jer om at sortere affaldet som fÃ¸lger: Billeder af affaldsstationen vil blive tilfÃ¸jet her.",
        skiTitle: "ğŸ¿ Skibakken",
        skiIntro: "Nyd en dag med ski i Gautefall skibakken. Her er lÃ¸ypekortet og information om heiskortpriser.",
        skiPrices: "For priser pÃ¥ heiskort, se nedenfor:",
        skiPricesList: "Voksen (dag): 500 DKK\nBarn (dag): 300 DKK\nSesongkort: 5000 DKK",
        cafeTitle: "â˜• Kafe",
        cafeIntro: "Kafeen ligger lige ved siden af hytten, kun 200 meter gangafstand og er en fin spadseretur fra hytten. Her kan I nyde en god kop kaffe eller noget at spise.",
        weatherToc: "ğŸŒ¤ï¸ Vejrudsigt",
        weatherTitle: "ğŸŒ¤ï¸ Vejrudsigt",
        weatherIntro: "Her er vejrudsigten for Gautefall skisenter de nÃ¦ste 7 dage, hentet fra Yr.no. (Rev 2)"
    },
    de: {
        title: "Willkommen in der Rytterveien 166",
        subtitle: "Leitfaden und Hilfeseite",
        tocTitle: "Inhaltsverzeichnis",
        waterToc: "ğŸ’§ Wasserversorgung",
        bedroomsToc: "ğŸ›ï¸ Schlafzimmer",
        jacuzziToc: "ğŸ› Whirlpool",
        fireplaceToc: "ğŸ”¥ Kamin",
        saunaToc: "ğŸ§– Sauna",
        wasteToc: "â™»ï¸ Abfallsortierung",
        skiToc: "ğŸ¿ Skibakken",
        cafeToc: "â˜• Kafe",
        weatherToc: "ğŸŒ¤ï¸ Wettervorhersage",
        departureToc: "ğŸ“‹ Bei Abreise",
        waterTitle: "Wasserversorgung",
        waterText: "Der Wasserhahn muss beim Ankommen geÃ¶ffnet und beim Verlassen der HÃ¼tte geschlossen werden. Dies stellt sicher, dass die Rohre im Winter nicht einfrieren.",
        bedroomsTitle: "Schlafzimmer",
        bedroomsText: "Die Schlafzimmer sind aufgerÃ¤umt und fÃ¼r Sie vorbereitet. Alle Betten sind mit frischer BettwÃ¤sche bezogen.",
        jacuzziTitle: "ğŸ› Whirlpool",
        jacuzziIntro: "Wir kÃ¼mmern uns gut um den Whirlpool, um Ihnen ein angenehmes Erlebnis zu garantieren. Hier ist die letzte Wartung:",
        jacuzziList: [
            "Wasserwechsel: Zuletzt durchgefÃ¼hrt am 15. Dezember 2024",
            "QualitÃ¤tsprÃ¼fung (Chlorgehalt): Zuletzt durchgefÃ¼hrt am 20. Dezember 2024"
        ],
        jacuzziTempAdvice: "Wir empfehlen, die Temperatur bei Ankunft auf 38 Grad einzustellen. Dies tun Sie, indem Sie auf das Display des Whirlpools drÃ¼cken, bis die gewÃ¼nschte Temperatur angezeigt wird.",
        jacuzziLidAdvice: "Wichtig: Denken Sie daran, den Deckel auf den Whirlpool zu legen, wenn er nicht in Gebrauch ist, um Energie zu sparen! ğŸ”‹ğŸ’š",
        jacuzziShowerAdvice: "Vor der Nutzung mÃ¶chten wir, dass alle, die den Whirlpool benutzen mÃ¶chten, eine kurze Dusche nehmen. Dies dient dazu, eine angenehme und saubere Umgebung fÃ¼r alle zu gewÃ¤hrleisten.",
        jacuzziChlorineAdvice: "Nach der Nutzung sollte 1 Chlor-Tablette hineingegeben werden, um das Wasser sauber zu halten.",
        fireplaceTitle: "ğŸ”¥ Kamin",
        fireplaceIntro: "Der Kamin kann verwendet werden, um die HÃ¼tte zu heizen. Stellen Sie sicher, dass keine Brandgefahr besteht, und lÃ¶schen Sie den Kamin immer, bevor Sie den Ort verlassen.",
        fireplaceStart: "Wenn wir den Kamin verwenden, empfehlen wir, 3 Holzscheite einzulegen und die Klappe auf Maximum zu stellen.",
        fireplaceAdjust: "Wenn das Feuer im Ofen gut brennt, kÃ¶nnen Sie auf unter Mittel herunterdrehen, mit der TÃ¼r vollstÃ¤ndig geschlossen.",
        fireplaceDraught: "Es gibt einen sehr guten Zug in diesem Ofen.",
        fireplaceStanding: "Sie kÃ¶nnen die Holzscheite stehend platzieren fÃ¼r das beste mÃ¶gliche Feuer.",
        saunaTitle: "ğŸ§– Sauna",
        saunaText: "Die Sauna steht zur Entspannung zur VerfÃ¼gung. Befolgen Sie die Sicherheitsanweisungen und verwenden Sie sie nicht ohne Aufsicht.",

        departureTitle: "ğŸ“‹ Bei Abreise",
        departureText: "Bitte tun Sie Folgendes, bevor Sie die HÃ¼tte verlassen:",
        departureOutro: "Wir hoffen, Sie hatten einen angenehmen Aufenthalt!",
        departureList: [
            "Nehmen Sie alle gebrauchten HandtÃ¼cher und BettwÃ¤sche und werfen Sie sie in die Waschmaschine.",
            "Schalten Sie das Wasser ab.",
            "HÃ¤ngen Sie den SchlÃ¼ssel zurÃ¼ck in die SchlÃ¼sselbox auÃŸen an der HaustÃ¼r.",
            "ÃœberprÃ¼fen Sie, dass alle Fenster und TÃ¼ren geschlossen sind."
        ],
        wasteTitle: "â™»ï¸ Abfallsortierung",
        wasteText: "Wir bitten Sie, den Abfall wie folgt zu sortieren: Bilder der Abfallstation werden hier hinzugefÃ¼gt.",
        skiTitle: "ğŸ¿ Skibakken",
        skiIntro: "GenieÃŸen Sie einen Tag mit Skifahren in der Gautefall Skibakken. Hier ist die Pistenkarte und Informationen zu Liftkartenpreisen.",
        skiPrices: "FÃ¼r Preise von Liftkarten, siehe unten:",
        skiPricesList: "Erwachsener (Tag): 50 EUR\nKind (Tag): 30 EUR\nSaisonkarte: 500 EUR",
        cafeTitle: "â˜• Kafe",
        cafeIntro: "Das CafÃ© liegt direkt neben der HÃ¼tte, nur 200 Meter zu FuÃŸ und ist ein schÃ¶ner Spaziergang von der HÃ¼tte. Hier kÃ¶nnen Sie einen guten Kaffee oder etwas zu essen genieÃŸen.",
        weatherToc: "ğŸŒ¤ï¸ Wettervorhersage",
        weatherTitle: "ğŸŒ¤ï¸ Wettervorhersage",
        weatherIntro: "Hier ist die Wettervorhersage fÃ¼r das Gautefall Skizentrum fÃ¼r die nÃ¤chsten 7 Tage, abgerufen von Yr.no. (Rev 2)"
    },
    en: {
        title: "Welcome to Rytterveien 166",
        subtitle: "Guide and help page",
        tocTitle: "Table of Contents",
        waterToc: "ğŸ’§ Water Supply",
        bedroomsToc: "ğŸ›ï¸ Bedrooms",
        jacuzziToc: "ğŸ› Jacuzzi",
        fireplaceToc: "ğŸ”¥ Fireplace",
        saunaToc: "ğŸ§– Sauna",
        wasteToc: "â™»ï¸ Waste Sorting",
        skiToc: "ğŸ¿ Ski Slope",
        cafeToc: "â˜• Cafe",
        weatherToc: "ğŸŒ¤ï¸ Weather Forecast",
        departureToc: "ğŸ“‹ Upon Departure",
        waterTitle: "Water Supply",
        waterText: "The water tap must be opened upon arrival and closed when leaving the cabin. This ensures that the pipes do not freeze in winter.",
        bedroomsTitle: "Bedrooms",
        bedroomsText: "The bedrooms are tidied up and prepared for you. All beds are made with clean linens.",
        jacuzziTitle: "ğŸ› Jacuzzi",
        jacuzziIntro: "We take good care of the jacuzzi to ensure a pleasant experience for you. Here is the latest maintenance:",
        jacuzziList: [
            "Water change: Last performed December 15, 2024",
            "Quality check (chlorine content): Last performed December 20, 2024"
        ],
        jacuzziTempAdvice: "We recommend setting the temperature to 38 degrees upon arrival. You do this by pressing the display on the jacuzzi until the desired temperature is shown.",
        jacuzziLidAdvice: "Important: Remember to put the lid on the jacuzzi when not in use to save energy! ğŸ”‹ğŸ’š",
        jacuzziShowerAdvice: "Before use, we ask that everyone who wants to use the jacuzzi takes a quick shower. This is to ensure a pleasant and clean environment for everyone.",
        jacuzziChlorineAdvice: "After use, 1 chlorine tablet should be added to keep the water clean.",
        fireplaceTitle: "ğŸ”¥ Fireplace",
        fireplaceIntro: "The fireplace can be used to heat the cabin. Ensure there is no fire hazard, and always extinguish the fireplace before leaving.",
        fireplaceStart: "When using the fireplace, we recommend putting in 3 logs and setting the damper to maximum.",
        fireplaceAdjust: "When there is a good fire in the stove, you can adjust down to below medium with the door completely closed.",
        fireplaceDraught: "There is very good draught in this stove.",
        fireplaceStanding: "You can place the logs standing for the best possible fire.",
        saunaTitle: "ğŸ§– Sauna",
        saunaText: "The sauna is available for relaxation. Follow safety instructions and do not use it unsupervised.",
        departureTitle: "ğŸ“‹ Upon Departure",
        departureText: "Please do the following before leaving the cabin:",
        departureOutro: "We hope you had a pleasant stay!",
        departureList: [
            "Take all used towels and bed linens and put them in the washing machine.",
            "Turn off the water.",
            "Hang the key back in the key box outside the main door.",
            "Check that all windows and doors are closed."
        ],
        wasteTitle: "â™»ï¸ Waste Sorting",
        wasteText: "We ask that you sort the waste as follows: Pictures of the waste station will be added here.",
        skiTitle: "ğŸ¿ Ski Slope",
        skiIntro: "Enjoy a day of skiing at Gautefall ski slope. Here is the trail map and information on lift ticket prices.",
        skiPrices: "For lift ticket prices, see below:",
        skiPricesList: "Adult (day): 50 USD\nChild (day): 30 USD\nSeason pass: 500 USD",
        cafeTitle: "â˜• Cafe",
        cafeIntro: "The cafe is located right next to the cabin, only 200 meters walking distance and is a nice walk from the cabin. Here you can enjoy a good cup of coffee or something to eat.",
        weatherToc: "ğŸŒ¤ï¸ Weather Forecast",
        weatherTitle: "ğŸŒ¤ï¸ Weather Forecast",
        weatherIntro: "Here is the weather forecast for Gautefall ski center for the next 7 days, retrieved from Yr.no. (Rev 2)"
    }
};

function updateContent(lang = 'no') {
    const trans = translations[lang];
    const locale = lang === 'no' ? 'no-NO' : lang === 'da' ? 'da-DK' : lang === 'de' ? 'de-DE' : 'en-US';

    document.querySelector('.hero h1').textContent = trans.title;
    document.getElementById('subtitle').textContent = trans.subtitle;
    document.getElementById('toc-title').textContent = trans.tocTitle;
    document.querySelector('#toc a[href="#water"]').textContent = trans.waterToc;
    document.querySelector('#toc a[href="#bedrooms"]').textContent = trans.bedroomsToc;
    document.querySelector('#toc a[href="#jacuzzi"]').textContent = trans.jacuzziToc;
    document.querySelector('#toc a[href="#fireplace"]').textContent = trans.fireplaceToc;
    document.querySelector('#toc a[href="#sauna"]').textContent = trans.saunaToc;
    document.querySelector('#toc a[href="#waste"]').textContent = trans.wasteToc;
    document.querySelector('#toc a[href="#ski"]').textContent = trans.skiToc;
    document.querySelector('#toc a[href="#cafe"]').textContent = trans.cafeToc;
    document.querySelector('#toc a[href="#weather"]').textContent = trans.weatherToc;
    document.querySelector('#toc a[href="#departure"]').textContent = trans.departureToc;
    document.querySelector('#water h2').textContent = trans.waterTitle;
    document.querySelector('#water p').textContent = trans.waterText;
    document.querySelector('#bedrooms h2').textContent = trans.bedroomsTitle;
    document.querySelector('#bedrooms p').textContent = trans.bedroomsText;
    document.querySelector('#jacuzzi h2').textContent = trans.jacuzziTitle;
    document.querySelector('#jacuzzi-intro').textContent = trans.jacuzziIntro;
    const jacuzziList = document.querySelector('#jacuzzi-list');
    jacuzziList.innerHTML = '';
    trans.jacuzziList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        jacuzziList.appendChild(li);
    });
    document.querySelector('#jacuzzi-temp').textContent = trans.jacuzziTempAdvice;
    document.querySelector('#jacuzzi-lid').textContent = trans.jacuzziLidAdvice;
    document.querySelector('#jacuzzi-shower').textContent = trans.jacuzziShowerAdvice;
    document.querySelector('#jacuzzi-chlorine').textContent = trans.jacuzziChlorineAdvice;
    document.querySelector('#fireplace h2').textContent = trans.fireplaceTitle;
    document.querySelector('#fireplace-intro').textContent = trans.fireplaceIntro;
    document.querySelector('#fireplace-start').textContent = trans.fireplaceStart;
    document.querySelector('#fireplace-adjust').textContent = trans.fireplaceAdjust;
    document.querySelector('#fireplace-draught').textContent = trans.fireplaceDraught;
    document.querySelector('#fireplace-standing').textContent = trans.fireplaceStanding;
    document.querySelector('#sauna h2').textContent = trans.saunaTitle;
    document.querySelector('#sauna p').textContent = trans.saunaText;
    document.querySelector('#departure h2').textContent = trans.departureTitle;
    document.querySelector('#departure p').textContent = trans.departureText;
    const list = document.querySelector('#departure ul');
    list.innerHTML = '';
    trans.departureList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        list.appendChild(li);
    });
    const outroP = document.querySelector('#departure p:last-of-type');
    outroP.textContent = trans.departureOutro;
    document.querySelector('#waste h2').textContent = trans.wasteTitle;
    document.querySelector('#waste p').textContent = trans.wasteText;
    document.querySelector('#ski h2').textContent = trans.skiTitle;
    document.querySelector('#ski-intro').textContent = trans.skiIntro;
    document.querySelector('#ski-prices').textContent = trans.skiPrices;
    const skiPricesList = document.querySelector('#ski-prices-list');
    skiPricesList.innerHTML = '';
    const prices = trans.skiPricesList.split('\n');
    prices.forEach(price => {
        const li = document.createElement('li');
        li.textContent = price;
        skiPricesList.appendChild(li);
    });
    document.querySelector('#cafe h2').textContent = trans.cafeTitle;
    document.querySelector('#cafe-intro').textContent = trans.cafeIntro;
    document.querySelector('#weather h2').textContent = trans.weatherTitle;
    document.querySelector('#weather-intro').textContent = trans.weatherIntro + " (Oppdatert: " + new Date().toLocaleString(locale) + ")";
}

function getWeatherIcon(symbol) {
    const iconMap = {
        'clearsky_day': 'â˜€ï¸',
        'clearsky_night': 'ğŸŒ™',
        'fair_day': 'ğŸŒ¤ï¸',
        'fair_night': 'ğŸŒ™',
        'partlycloudy_day': 'â›…',
        'partlycloudy_night': 'â˜ï¸',
        'cloudy': 'â˜ï¸',
        'lightrain': 'ğŸŒ¦ï¸',
        'rain': 'ğŸŒ§ï¸',
        'heavyrain': 'â›ˆï¸',
        'rainandthunder': 'â›ˆï¸',
        'rainshowers_day': 'ğŸŒ¦ï¸',
        'rainshowers_night': 'ğŸŒ§ï¸',
        'sleet': 'ğŸŒ¨ï¸',
        'lightsleet': 'ğŸŒ¨ï¸',
        'heavysleet': 'ğŸŒ¨ï¸',
        'snow': 'â„ï¸',
        'lightsnow': 'ğŸŒ¨ï¸',
        'heavysnow': 'â„ï¸',
        'snowshowers_day': 'ğŸŒ¨ï¸',
        'snowshowers_night': 'â„ï¸',
        'fog': 'ğŸŒ«ï¸',
        'lightrainandthunder': 'â›ˆï¸',
        'rainandthunder': 'â›ˆï¸',
        'sleetandthunder': 'â›ˆï¸',
        'snowandthunder': 'â›ˆï¸',
        'lightrainshowersandthunder': 'â›ˆï¸',
        'rainshowersandthunder': 'â›ˆï¸',
        'sleetshowersandthunder': 'â›ˆï¸',
        'snowshowersandthunder': 'â›ˆï¸',
        'unknown': 'ğŸŒ¨ï¸'
    };
    return iconMap[symbol] || 'ğŸŒ¨ï¸';
}

async function fetchWeather(lang = 'no') {
    const forecastDiv = document.getElementById('weather-forecast');
    const loadingText = lang === 'no' ? 'Laster vÃ¦rvarsel...' : lang === 'da' ? 'IndlÃ¦ser vejrudsigt...' : lang === 'de' ? 'Lade Wettervorhersage...' : 'Loading weather forecast...';
    forecastDiv.innerHTML = loadingText;
    const locale = lang === 'no' ? 'no-NO' : lang === 'da' ? 'da-DK' : lang === 'de' ? 'de-DE' : 'en-US';
    try {
        const response = await fetch('https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=58.8167&lon=7.7833', {
            headers: {
                'User-Agent': 'Rytterveien166-Guide/1.0 (rolf.kittelsen@imstec.no)'
            }
        });
        if (!response.ok) throw new Error('API error');
        const data = await response.json();
        const timeseries = data.properties.timeseries;
        
        // Get next 7 days, one per day at noon
        const now = new Date();
        const forecasts = [];
        for (let i = 0; i < 7; i++) {
            const date = new Date(now);
            date.setDate(now.getDate() + i);
            const dateStr = date.toISOString().slice(0, 10); // YYYY-MM-DD
            const dayEntries = timeseries.filter(t => t.time.startsWith(dateStr));
            if (dayEntries.length > 0) {
                // Calculate max/min temperature
                const temps = dayEntries.map(e => e.data.instant.details.air_temperature);
                const maxTemp = Math.max(...temps);
                const minTemp = Math.min(...temps);
                
                // Sum precipitation
                const precip = dayEntries.reduce((sum, e) => sum + (e.data.next_1_hours?.details.precipitation_amount || 0), 0);
                
                // Find symbol closest to 15:00 (afternoon)
                const afternoonEntry = dayEntries.reduce((closest, current) => {
                    const currentHour = new Date(current.time).getHours();
                    const closestHour = new Date(closest.time).getHours();
                    return Math.abs(currentHour - 15) < Math.abs(closestHour - 15) ? current : closest;
                });
                const symbol = afternoonEntry.data.next_1_hours?.summary.symbol_code || 'unknown';
                
                forecasts.push({ date, maxTemp, minTemp, precip, symbol });
            } else {
                // Default if no data
                forecasts.push({ date, maxTemp: 0, minTemp: 0, precip: 0, symbol: 'unknown' });
            }
        }
        
        const icons = forecasts.map(f => getWeatherIcon(f.data.next_1_hours?.summary.symbol_code || 'unknown'));

        forecastDiv.innerHTML = '<div style="display: flex; flex-wrap: wrap; gap: 20px; justify-content: center;">' + forecasts.map((f, index) => {
            const icon = getWeatherIcon(f.symbol);
            const day = f.date.toLocaleDateString(locale, { weekday: 'short', month: 'short', day: 'numeric' });
            return `<div style="text-align: center; min-width: 100px;"><span style="font-size: 48px; display: block;">${icon}</span><strong>${day}</strong><br>Maks: ${f.maxTemp}Â°C<br>Min: ${f.minTemp}Â°C<br>NedbÃ¸r: ${f.precip.toFixed(1)} mm</div>`;
        }).join('') + '</div>';
    } catch (error) {
        forecastDiv.innerHTML = 'Kunne ikke laste vÃ¦rvarsel. PrÃ¸v igjen senere.';
        console.error(error);
    }
}

document.getElementById('language').addEventListener('change', function() {
    const lang = this.value;
    updateContent(lang);
    fetchWeather(lang);
});

// Initial load
window.addEventListener('load', () => {
    updateContent();
    fetchWeather();
});

document.getElementById('download-pdf').addEventListener('click', function() {
    const element = document.querySelector('.container');
    html2pdf().from(element).save('rytterveien-info.pdf');
});