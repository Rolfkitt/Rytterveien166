const translations = {
    no: {
        title: "Velkommen til Rytterveien 166",
        subtitle: "Guide og hjelpeside",
        tocTitle: "Innholdsfortegnelse",
        waterToc: "üíß Vannforsyning",
        bedroomsToc: "üõèÔ∏è Soverom",
        jacuzziToc: "üõÅ Boblebad",
        fireplaceToc: "üî• Peis",
        saunaToc: "üßñ Badstue",
        wasteToc: "‚ôªÔ∏è S√∏ppelsortering",
        skiToc: "üéø Skibakken",
        cafeToc: "‚òï Kafe",
        departureToc: "üìã Ved Avreise",
        waterTitle: "üíß Vannforsyning",
        waterText: "Vannkranen m√• √•pnes n√•r dere ankommer og lukkes n√•r dere forlater hytta. Dette sikrer at r√∏rene ikke fryser om vinteren.",
        bedroomsTitle: "üõèÔ∏è Soverom",
        bedroomsText: "Soverommene er ryddet opp og klargjort for dere. Alle senger er gjort med rent senget√∏y.",
        jacuzziTitle: "üõÅ Boblebad",
        jacuzziIntro: "Vi tar godt vare p√• boblebadet for √• sikre en hyggelig opplevelse for dere. Her er siste vedlikehold:",
        jacuzziList: [
            "Vannskifte: Sist utf√∏rt 15. desember 2024",
            "Kvalitetssjekk (klorinnhold): Sist utf√∏rt 20. desember 2024"
        ],
        jacuzziTempAdvice: "Vi anbefaler at dere setter temperaturen til 38 grader ved ankomst. Dette gj√∏r dere ved √• trykke p√• displayet p√• boblebadet til √∏nsket temperatur vises.",
        jacuzziLidAdvice: "Viktig: Husk √• sette lokket p√• boblebadet n√•r det ikke er i bruk for √• spare energi! üîãüíö",
        jacuzziShowerAdvice: "F√∏r bruk √∏nsker vi at alle som skal bruke boblebadet tar en kjapp dusj. Dette er for √• sikre et hyggelig og rent milj√∏ for alle.",
        jacuzziChlorineAdvice: "Etter bruk skal det settes oppi 1 stk klor tablett for √• holde vannet rent.",
        fireplaceTitle: "üî• Peis",
        fireplaceIntro: "Peisen kan brukes til √• varme opp hytta. S√∏rg for at det ikke er brannfare, og slukk alltid peisen f√∏r dere forlater stedet.",
        fireplaceStart: "N√•r vi bruker peisen anbefaler vi at dere legger inn 3 stk vedkubber og setter spjeld til maks.",
        fireplaceAdjust: "N√•r det er god fyr i ovnen kan dere justere ned til under middels med d√∏ren helt lukket.",
        fireplaceDraught: "Det er veldig god trekk i denne ovnen.",
        fireplaceStanding: "Dere kan sette vedkubber st√•ende for beste mulig fyr.",
        saunaTitle: "üßñ Badstue",
        saunaText: "Badstuen er tilgjengelig for avslapning. F√∏lg sikkerhetsinstruksjonene og ikke bruk den uten tilsyn.",
        departureTitle: "üìã Ved Avreise",
        departureText: "Vi setter stor pris p√• om dere kan gj√∏re f√∏lgende f√∏r dere forlater hytta:",
        departureOutro: "H√•per at dere har hatt et hyggelig opphold!",
        departureList: [
            "Ta alt brukte h√•ndkl√¶r og senget√∏y og kast dem i vaskemaskinen.",
            "Skru av vannet.",
            "Heng opp n√∏kkelen tilbake i n√∏kkelboksen p√• utsiden av hovedd√∏ren.",
            "Sjekk at alle vinduer og d√∏rer er lukket."
        ],
        wasteTitle: "‚ôªÔ∏è S√∏ppelsortering",
        wasteText: "Vi ber om at dere sorterer s√∏ppelet som f√∏lger: Bilder av s√∏ppelstasjonen vil bli lagt til her.",
        skiTitle: "üéø Skibakken",
        skiIntro: "Nyt en dag med ski i Gautefall skibakken. Her er l√∏ypekartet og informasjon om heiskortpriser.",
        skiPrices: "For priser p√• heiskort, se nedenfor:",
        skiPricesList: "Voksen (dag): 500 NOK\nBarn (dag): 300 NOK\nSesongkort: 5000 NOK",
        cafeTitle: "‚òï Kafe",
        cafeIntro: "Kafeen ligger rett ved siden av hytten, kun 200 meter gangavstand og er en fin spasertur fra hytta. Her kan dere nyte en god kopp kaffe eller noe √• spise.",
        weatherToc: "üå§Ô∏è V√¶rmelding",
        weatherTitle: "üå§Ô∏è V√¶rmelding",
        weatherIntro: "Her er v√¶rvarslet for Gautefall skisenter de neste 7 dagene, hentet fra Yr.no."
    },
    da: {
        title: "Velkommen til Rytterveien 166",
        subtitle: "Guide og hj√¶lpeside",
        tocTitle: "Indholdsfortegnelse",
        waterToc: "üíß Vandforsyning",
        bedroomsToc: "üõèÔ∏è Sovev√¶relser",
        jacuzziToc: "üõÅ Boblebad",
        fireplaceToc: "üî• Peis",
        saunaToc: "üßñ Badstue",
        wasteToc: "‚ôªÔ∏è Affaldssortering",
        skiToc: "üéø Skibakken",
        cafeToc: "‚òï Kafe",
        weatherToc: "üå§Ô∏è Vejrudsigt",
        departureToc: "üìã Ved Afrejse",
        waterTitle: "Vandforsyning",
        waterText: "Vandhanen skal √•bnes n√•r I ankommer og lukkes n√•r I forlader hytten. Dette sikrer at r√∏rene ikke fryser om vinteren.",
        bedroomsTitle: "Sovev√¶relser",
        bedroomsText: "Sovev√¶relserne er ryddet op og gjort klar til jer. Alle senge er gjort med rent senget√∏j.",
        jacuzziTitle: "üõÅ Boblebad",
        jacuzziIntro: "Vi tager godt vare p√• boblebadet for at sikre en hyggelig oplevelse for jer. Her er sidste vedligeholdelse:",
        jacuzziList: [
            "Vandskifte: Sidst udf√∏rt 15. december 2024",
            "Kvalitetstjek (klorindhold): Sidst udf√∏rt 20. december 2024"
        ],
        jacuzziTempAdvice: "Vi anbefaler, at I s√¶tter temperaturen til 38 grader ved ankomst. Dette g√∏r I ved at trykke p√• displayet p√• boblebadet til √∏nsket temperatur vises.",
        jacuzziLidAdvice: "Vigtigt: Husk at s√¶tte l√•get p√• boblebadet, n√•r det ikke er i brug for at spare energi! üîãüíö",
        jacuzziShowerAdvice: "F√∏r brug √∏nsker vi, at alle som skal bruge boblebadet tager et hurtigt bad. Dette er for at sikre et hyggeligt og rent milj√∏ for alle.",
        jacuzziChlorineAdvice: "Efter brug skal der s√¶ttes 1 stk klor tablet op i for at holde vandet rent.",
        fireplaceTitle: "üî• Peis",
        fireplaceIntro: "Peisen kan brukes til √• varme opp hytta. S√∏rg for at det ikke er brannfare, og slukk alltid peisen f√∏r dere forlater stedet.",
        fireplaceStart: "N√•r vi bruker peisen anbefaler vi at dere legger inn 3 stk vedkubber og setter spjeld til maks.",
        fireplaceAdjust: "N√•r det er god fyr i ovnen kan dere justere ned til under middels med d√∏ren helt lukket.",
        fireplaceDraught: "Det er veldig god trekk i denne ovnen.",
        fireplaceStanding: "Dere kan sette vedkubber st√•ende for beste mulig fyr.",
        saunaTitle: "üßñ Badstue",
        saunaText: "Badstuen er tilgjengelig for avslapning. F√∏lg sikkerhetsinstruksjonene og ikke bruk den uten tilsyn.",
        departureTitle: "üìã Ved Afrejse",
        departureText: "Venligst g√∏r f√∏lgende f√∏r I forlader hytten:",
        departureOutro: "H√•ber at I har haft et hyggeligt ophold!",
        departureList: [
            "Tag alt brugt h√•ndkl√¶der og senget√∏j og kast dem i vaskemaskinen.",
            "Sluk for vandet.",
            "H√¶ng n√∏glen tilbage i n√∏gleboksen p√• ydersiden af hovedd√∏ren.",
            "Tjek at alle vinduer og d√∏re er lukket."
        ],
        wasteTitle: "‚ôªÔ∏è Affaldssortering",
        wasteText: "Vi beder jer om at sortere affaldet som f√∏lger: Billeder af affaldsstationen vil blive tilf√∏jet her.",
        skiTitle: "üéø Skibakken",
        skiIntro: "Nyd en dag med ski i Gautefall skibakken. Her er l√∏ypekortet og information om heiskortpriser.",
        skiPrices: "For priser p√• heiskort, se nedenfor:",
        skiPricesList: "Voksen (dag): 500 DKK\nBarn (dag): 300 DKK\nSesongkort: 5000 DKK",
        cafeTitle: "‚òï Kafe",
        cafeIntro: "Kafeen ligger lige ved siden af hytten, kun 200 meter gangafstand og er en fin spadseretur fra hytten. Her kan I nyde en god kop kaffe eller noget at spise.",
        weatherToc: "üå§Ô∏è Vejrudsigt",
        weatherTitle: "üå§Ô∏è Vejrudsigt",
        weatherIntro: "Her er vejrudsigten for Gautefall skisenter de n√¶ste 7 dage, hentet fra Yr.no."
    },
    de: {
        title: "Willkommen in der Rytterveien 166",
        subtitle: "Leitfaden und Hilfeseite",
        tocTitle: "Inhaltsverzeichnis",
        waterToc: "üíß Wasserversorgung",
        bedroomsToc: "üõèÔ∏è Schlafzimmer",
        jacuzziToc: "üõÅ Whirlpool",
        fireplaceToc: "üî• Kamin",
        saunaToc: "üßñ Sauna",
        wasteToc: "‚ôªÔ∏è Abfallsortierung",
        skiToc: "üéø Skibakken",
        cafeToc: "‚òï Kafe",
        weatherToc: "üå§Ô∏è Wettervorhersage",
        departureToc: "üìã Bei Abreise",
        waterTitle: "Wasserversorgung",
        waterText: "Der Wasserhahn muss beim Ankommen ge√∂ffnet und beim Verlassen der H√ºtte geschlossen werden. Dies stellt sicher, dass die Rohre im Winter nicht einfrieren.",
        bedroomsTitle: "Schlafzimmer",
        bedroomsText: "Die Schlafzimmer sind aufger√§umt und f√ºr Sie vorbereitet. Alle Betten sind mit frischer Bettw√§sche bezogen.",
        jacuzziTitle: "üõÅ Whirlpool",
        jacuzziIntro: "Wir k√ºmmern uns gut um den Whirlpool, um Ihnen ein angenehmes Erlebnis zu garantieren. Hier ist die letzte Wartung:",
        jacuzziList: [
            "Wasserwechsel: Zuletzt durchgef√ºhrt am 15. Dezember 2024",
            "Qualit√§tspr√ºfung (Chlorgehalt): Zuletzt durchgef√ºhrt am 20. Dezember 2024"
        ],
        jacuzziTempAdvice: "Wir empfehlen, die Temperatur bei Ankunft auf 38 Grad einzustellen. Dies tun Sie, indem Sie auf das Display des Whirlpools dr√ºcken, bis die gew√ºnschte Temperatur angezeigt wird.",
        jacuzziLidAdvice: "Wichtig: Denken Sie daran, den Deckel auf den Whirlpool zu legen, wenn er nicht in Gebrauch ist, um Energie zu sparen! üîãüíö",
        jacuzziShowerAdvice: "Vor der Nutzung m√∂chten wir, dass alle, die den Whirlpool benutzen m√∂chten, eine kurze Dusche nehmen. Dies dient dazu, eine angenehme und saubere Umgebung f√ºr alle zu gew√§hrleisten.",
        jacuzziChlorineAdvice: "Nach der Nutzung sollte 1 Chlor-Tablette hineingegeben werden, um das Wasser sauber zu halten.",
        fireplaceTitle: "üî• Kamin",
        fireplaceIntro: "Der Kamin kann verwendet werden, um die H√ºtte zu heizen. Stellen Sie sicher, dass keine Brandgefahr besteht, und l√∂schen Sie den Kamin immer, bevor Sie den Ort verlassen.",
        fireplaceStart: "Wenn wir den Kamin verwenden, empfehlen wir, 3 Holzscheite einzulegen und die Klappe auf Maximum zu stellen.",
        fireplaceAdjust: "Wenn das Feuer im Ofen gut brennt, k√∂nnen Sie auf unter Mittel herunterdrehen, mit der T√ºr vollst√§ndig geschlossen.",
        fireplaceDraught: "Es gibt einen sehr guten Zug in diesem Ofen.",
        fireplaceStanding: "Sie k√∂nnen die Holzscheite stehend platzieren f√ºr das beste m√∂gliche Feuer.",
        saunaTitle: "üßñ Sauna",
        saunaText: "Die Sauna steht zur Entspannung zur Verf√ºgung. Befolgen Sie die Sicherheitsanweisungen und verwenden Sie sie nicht ohne Aufsicht.",

        departureTitle: "üìã Bei Abreise",
        departureText: "Bitte tun Sie Folgendes, bevor Sie die H√ºtte verlassen:",
        departureOutro: "Wir hoffen, Sie hatten einen angenehmen Aufenthalt!",
        departureList: [
            "Nehmen Sie alle gebrauchten Handt√ºcher und Bettw√§sche und werfen Sie sie in die Waschmaschine.",
            "Schalten Sie das Wasser ab.",
            "H√§ngen Sie den Schl√ºssel zur√ºck in die Schl√ºsselbox au√üen an der Haust√ºr.",
            "√úberpr√ºfen Sie, dass alle Fenster und T√ºren geschlossen sind."
        ],
        wasteTitle: "‚ôªÔ∏è Abfallsortierung",
        wasteText: "Wir bitten Sie, den Abfall wie folgt zu sortieren: Bilder der Abfallstation werden hier hinzugef√ºgt.",
        skiTitle: "üéø Skibakken",
        skiIntro: "Genie√üen Sie einen Tag mit Skifahren in der Gautefall Skibakken. Hier ist die Pistenkarte und Informationen zu Liftkartenpreisen.",
        skiPrices: "F√ºr Preise von Liftkarten, siehe unten:",
        skiPricesList: "Erwachsener (Tag): 50 EUR\nKind (Tag): 30 EUR\nSaisonkarte: 500 EUR",
        cafeTitle: "‚òï Kafe",
        cafeIntro: "Das Caf√© liegt direkt neben der H√ºtte, nur 200 Meter zu Fu√ü und ist ein sch√∂ner Spaziergang von der H√ºtte. Hier k√∂nnen Sie einen guten Kaffee oder etwas zu essen genie√üen.",
        weatherToc: "üå§Ô∏è Wettervorhersage",
        weatherTitle: "üå§Ô∏è Wettervorhersage",
        weatherIntro: "Hier ist die Wettervorhersage f√ºr das Gautefall Skizentrum f√ºr die n√§chsten 7 Tage, abgerufen von Yr.no."
    },
    en: {
        title: "Welcome to Rytterveien 166",
        subtitle: "Guide and help page",
        tocTitle: "Table of Contents",
        waterToc: "üíß Water Supply",
        bedroomsToc: "üõèÔ∏è Bedrooms",
        jacuzziToc: "üõÅ Jacuzzi",
        fireplaceToc: "üî• Fireplace",
        saunaToc: "üßñ Sauna",
        wasteToc: "‚ôªÔ∏è Waste Sorting",
        skiToc: "üéø Ski Slope",
        cafeToc: "‚òï Cafe",
        weatherToc: "üå§Ô∏è Weather Forecast",
        departureToc: "üìã Upon Departure",
        waterTitle: "Water Supply",
        waterText: "The water tap must be opened upon arrival and closed when leaving the cabin. This ensures that the pipes do not freeze in winter.",
        bedroomsTitle: "Bedrooms",
        bedroomsText: "The bedrooms are tidied up and prepared for you. All beds are made with clean linens.",
        jacuzziTitle: "üõÅ Jacuzzi",
        jacuzziIntro: "We take good care of the jacuzzi to ensure a pleasant experience for you. Here is the latest maintenance:",
        jacuzziList: [
            "Water change: Last performed December 15, 2024",
            "Quality check (chlorine content): Last performed December 20, 2024"
        ],
        jacuzziTempAdvice: "We recommend setting the temperature to 38 degrees upon arrival. You do this by pressing the display on the jacuzzi until the desired temperature is shown.",
        jacuzziLidAdvice: "Important: Remember to put the lid on the jacuzzi when not in use to save energy! üîãüíö",
        jacuzziShowerAdvice: "Before use, we ask that everyone who wants to use the jacuzzi takes a quick shower. This is to ensure a pleasant and clean environment for everyone.",
        jacuzziChlorineAdvice: "After use, 1 chlorine tablet should be added to keep the water clean.",
        fireplaceTitle: "üî• Fireplace",
        fireplaceIntro: "The fireplace can be used to heat the cabin. Ensure there is no fire hazard, and always extinguish the fireplace before leaving.",
        fireplaceStart: "When using the fireplace, we recommend putting in 3 logs and setting the damper to maximum.",
        fireplaceAdjust: "When there is a good fire in the stove, you can adjust down to below medium with the door completely closed.",
        fireplaceDraught: "There is very good draught in this stove.",
        fireplaceStanding: "You can place the logs standing for the best possible fire.",
        saunaTitle: "üßñ Sauna",
        saunaText: "The sauna is available for relaxation. Follow safety instructions and do not use it unsupervised.",
        departureTitle: "üìã Upon Departure",
        departureText: "Please do the following before leaving the cabin:",
        departureOutro: "We hope you had a pleasant stay!",
        departureList: [
            "Take all used towels and bed linens and put them in the washing machine.",
            "Turn off the water.",
            "Hang the key back in the key box outside the main door.",
            "Check that all windows and doors are closed."
        ],
        wasteTitle: "‚ôªÔ∏è Waste Sorting",
        wasteText: "We ask that you sort the waste as follows: Pictures of the waste station will be added here.",
        skiTitle: "üéø Ski Slope",
        skiIntro: "Enjoy a day of skiing at Gautefall ski slope. Here is the trail map and information on lift ticket prices.",
        skiPrices: "For lift ticket prices, see below:",
        skiPricesList: "Adult (day): 50 USD\nChild (day): 30 USD\nSeason pass: 500 USD",
        cafeTitle: "‚òï Cafe",
        cafeIntro: "The cafe is located right next to the cabin, only 200 meters walking distance and is a nice walk from the cabin. Here you can enjoy a good cup of coffee or something to eat.",
        weatherToc: "üå§Ô∏è Weather Forecast",
        weatherTitle: "üå§Ô∏è Weather Forecast",
        weatherIntro: "Here is the weather forecast for Gautefall ski center for the next 7 days, retrieved from Yr.no."
    }
};

function updateContent(lang = 'no') {
    const trans = translations[lang];

    document.querySelector('.hero h1').textContent = trans.title;
    document.getElementById('subtitle').textContent = trans.subtitle;
    document.getElementById('toc-title').textContent = trans.tocTitle;
    document.querySelector('#toc a[href="#water"]').textContent = trans.waterToc;
    document.querySelector('#toc a[href="#bedrooms"]').textContent = trans.bedroomsToc;
    document.querySelector('#toc a[href="#jacuzzi"]').textContent = trans.jacuzziToc;
    document.querySelector('#toc a[href="#fireplace"]').textContent = trans.fireplaceToc;
    document.querySelector('#toc a[href="#sauna"]').textContent = trans.saunaToc;
    document.querySelector('#toc a[href="#waste"]').textContent = trans.wasteToc;
    document.querySelector('#toc a[href="#ski"]').textContent = trans.skiToc;
    document.querySelector('#toc a[href="#cafe"]').textContent = trans.cafeToc;
    document.querySelector('#toc a[href="#weather"]').textContent = trans.weatherToc;
    document.querySelector('#toc a[href="#departure"]').textContent = trans.departureToc;
    document.querySelector('#water h2').textContent = trans.waterTitle;
    document.querySelector('#water p').textContent = trans.waterText;
    document.querySelector('#bedrooms h2').textContent = trans.bedroomsTitle;
    document.querySelector('#bedrooms p').textContent = trans.bedroomsText;
    document.querySelector('#jacuzzi h2').textContent = trans.jacuzziTitle;
    document.querySelector('#jacuzzi-intro').textContent = trans.jacuzziIntro;
    const jacuzziList = document.querySelector('#jacuzzi-list');
    jacuzziList.innerHTML = '';
    trans.jacuzziList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        jacuzziList.appendChild(li);
    });
    document.querySelector('#jacuzzi-temp').textContent = trans.jacuzziTempAdvice;
    document.querySelector('#jacuzzi-lid').textContent = trans.jacuzziLidAdvice;
    document.querySelector('#jacuzzi-shower').textContent = trans.jacuzziShowerAdvice;
    document.querySelector('#jacuzzi-chlorine').textContent = trans.jacuzziChlorineAdvice;
    document.querySelector('#fireplace h2').textContent = trans.fireplaceTitle;
    document.querySelector('#fireplace-intro').textContent = trans.fireplaceIntro;
    document.querySelector('#fireplace-start').textContent = trans.fireplaceStart;
    document.querySelector('#fireplace-adjust').textContent = trans.fireplaceAdjust;
    document.querySelector('#fireplace-draught').textContent = trans.fireplaceDraught;
    document.querySelector('#fireplace-standing').textContent = trans.fireplaceStanding;
    document.querySelector('#sauna h2').textContent = trans.saunaTitle;
    document.querySelector('#sauna p').textContent = trans.saunaText;
    document.querySelector('#departure h2').textContent = trans.departureTitle;
    document.querySelector('#departure p').textContent = trans.departureText;
    const list = document.querySelector('#departure ul');
    list.innerHTML = '';
    trans.departureList.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        list.appendChild(li);
    });
    const outroP = document.querySelector('#departure p:last-of-type');
    outroP.textContent = trans.departureOutro;
    document.querySelector('#waste h2').textContent = trans.wasteTitle;
    document.querySelector('#waste p').textContent = trans.wasteText;
    document.querySelector('#ski h2').textContent = trans.skiTitle;
    document.querySelector('#ski-intro').textContent = trans.skiIntro;
    document.querySelector('#ski-prices').textContent = trans.skiPrices;
    const skiPricesList = document.querySelector('#ski-prices-list');
    skiPricesList.innerHTML = '';
    const prices = trans.skiPricesList.split('\n');
    prices.forEach(price => {
        const li = document.createElement('li');
        li.textContent = price;
        skiPricesList.appendChild(li);
    });
    document.querySelector('#cafe h2').textContent = trans.cafeTitle;
    document.querySelector('#cafe-intro').textContent = trans.cafeIntro;
    document.querySelector('#weather h2').textContent = trans.weatherTitle;
    document.querySelector('#weather-intro').textContent = trans.weatherIntro;
}

async function fetchWeather(lang = 'no') {
    const forecastDiv = document.getElementById('weather-forecast');
    const loadingText = lang === 'no' ? 'Laster v√¶rvarsel...' : lang === 'da' ? 'Indl√¶ser vejrudsigt...' : lang === 'de' ? 'Lade Wettervorhersage...' : 'Loading weather forecast...';
    forecastDiv.innerHTML = loadingText;
    const locale = lang === 'no' ? 'no-NO' : lang === 'da' ? 'da-DK' : lang === 'de' ? 'de-DE' : 'en-US';
    try {
        const response = await fetch('https://api.met.no/weatherapi/locationforecast/2.0/compact?lat=58.8167&lon=7.7833', {
            headers: {
                'User-Agent': 'Rytterveien166-Guide/1.0 (rolf.kittelsen@imstec.no)'
            }
        });
        if (!response.ok) throw new Error('API error');
        const data = await response.json();
        const timeseries = data.properties.timeseries;
        
        // Get next 7 days, one per day at noon
        const now = new Date();
        const forecasts = [];
        for (let i = 0; i < 7; i++) {
            const date = new Date(now);
            date.setDate(now.getDate() + i);
            date.setHours(12, 0, 0, 0);
            const iso = date.toISOString();
            const entry = timeseries.find(t => t.time.startsWith(iso.slice(0, 13))); // match hour
            if (entry) forecasts.push({ date, data: entry.data });
        }
        
        forecastDiv.innerHTML = '<ul style="list-style: none; padding: 0;">' + forecasts.map(f => {
            const temp = f.data.instant.details.air_temperature;
            const symbol = f.data.next_1_hours?.summary.symbol_code || 'unknown';
            const precip = f.data.next_1_hours?.details.precipitation_amount || 0;
            const day = f.date.toLocaleDateString(locale, { weekday: 'long', month: 'short', day: 'numeric' });
            return `<li style="display: flex; align-items: center; margin-bottom: 10px;"><img src="https://api.met.no/weatherapi/weathericon/2.0/?symbol=${symbol}&content_type=image/png&size=large" alt="${symbol}" style="width: 64px; height: 64px; margin-right: 10px;"> <strong>${day}:</strong> ${temp}¬∞C, Nedb√∏r: ${precip} mm</li>`;
        }).join('') + '</ul>';
    } catch (error) {
        forecastDiv.innerHTML = 'Kunne ikke laste v√¶rvarsel. Pr√∏v igjen senere.';
        console.error(error);
    }
}

document.getElementById('language').addEventListener('change', function() {
    const lang = this.value;
    updateContent(lang);
    fetchWeather(lang);
});

// Initial load
window.addEventListener('load', () => {
    updateContent();
    fetchWeather();
});

document.getElementById('download-pdf').addEventListener('click', function() {
    const element = document.querySelector('.container');
    html2pdf().from(element).save('rytterveien-info.pdf');
});